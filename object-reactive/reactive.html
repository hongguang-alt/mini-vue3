<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>object-reactive</title>
</head>

<body>

</body>
<script src="./reactive.js"></script>
<script>
    // const data = {
    //     foo: 1,
    //     get bar(){
    //         return this.foo
    //     }
    // }
    // // demo1 代理使用Reflect
    // const p = reactive(data)
    // effect(()=>{
    //     console.log(p.bar)
    // })
    // p.foo++
    // p.foo++

    // // demo2 代理in
    // const obj = { foo:1 }
    // const p1 = reactive(obj)
    // effect(()=>{
    //    console.log('foo' in p1, 'effect')
    // })
    // console.log(p1.foo++)

    // // demo3 代理 for...in 
    // const obj =  { foo:1 }
    // const p2 = reactive(obj)
    // effect(()=>{
    //     for(const key in p2){
    //         console.log(key,'effect')
    //     }
    // })
    // p2.foo = 2

    // // demo4 合理触发响应式(原型链继承)
    // const obj = {}
    // const proto = {
    //     foo: 1
    // }
    // const child = reactive(obj)
    // const parent = reactive(proto)
    // Object.setPrototypeOf(child, parent)

    // effect(() => {
    //     console.log(child.foo)
    // })
    // child.foo = 20

    // demo5 只读
    // const obj = readOnly({})

    // 数组
    // const arr = reactive(['foo'])
    // effect(() => {
    //     console.log(arr.length)
    // })
    // arr[1] = 'bar'

    // const arr = reactive(['foo'])
    // effect(() => {
    //     console.log(arr[0])
    // })
    // arr.length = 100

    // 数组对于for in的代理
    // const arr = reactive(['foo'])
    // effect(() => {
    //     for (const key in arr) {
    //         console.log(key)
    //     }
    // })
    // arr[1] = 10
    // arr.length = 0

    // 数组对于for of的代理
    // const arr = [1, 2, 3, 4, 5]
    // effect(() => {
    //     for (const val of arr) {
    //         console.log(val)
    //     }
    // })
    // 数组的一些方法
    // const arr = reactive([1, 2])
    // effect(() => {
    //     console.log(arr.includes(2))
    // })
    // arr[1] = 3

    const obj = {}
    const arr = reactive([obj])

    console.log(arr.includes(arr[0]))
</script>

</html>